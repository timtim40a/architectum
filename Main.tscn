[gd_scene load_steps=9 format=3 uid="uid://b2ijp2yl5p3k8"]

[ext_resource type="Script" uid="uid://c00pucr40iyo6" path="res://main.gd" id="1_oi1ur"]
[ext_resource type="Texture2D" uid="uid://kko75fxu1e55" path="res://tilemap_architectum2.png" id="2_ilt5p"]
[ext_resource type="Script" uid="uid://b4lwjif6xdt13" path="res://room_manager.gd" id="3_cm0pq"]
[ext_resource type="Script" uid="uid://bi6p3puchang8" path="res://ui_manager.gd" id="3_r0du0"]
[ext_resource type="Script" uid="uid://cu53roas08gmq" path="res://resource_manager.gd" id="4_fos0i"]
[ext_resource type="Script" uid="uid://cb7is4m5cvjnx" path="res://house_manager.gd" id="6_3dxm6"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_2pi7f"]
texture = ExtResource("2_ilt5p")
texture_region_size = Vector2i(64, 64)
0:0/0 = 0
1:0/0 = 0
2:0/0 = 0
3:0/0 = 0
4:0/0 = 0
5:0/0 = 0
6:0/0 = 0
7:0/0 = 0
0:1/0 = 0
1:1/0 = 0
2:1/0 = 0
3:1/0 = 0
4:1/0 = 0
5:1/0 = 0
6:1/0 = 0
7:1/0 = 0
0:2/0 = 0
1:2/0 = 0
2:2/0 = 0
3:2/0 = 0
7:2/0 = 0
0:3/0 = 0
1:3/0 = 0
2:3/0 = 0
3:3/0 = 0
4:3/0 = 0
5:3/0 = 0
6:3/0 = 0
7:3/0 = 0
0:4/0 = 0
1:4/0 = 0
2:4/0 = 0
3:4/0 = 0
4:4/0 = 0
5:4/0 = 0
6:4/0 = 0
7:4/0 = 0
0:5/0 = 0
1:5/0 = 0
2:5/0 = 0
3:5/0 = 0
4:5/0 = 0
5:5/0 = 0
6:5/0 = 0
7:5/0 = 0
0:6/0 = 0
1:6/0 = 0
2:6/0 = 0
3:6/0 = 0
4:6/0 = 0
5:6/0 = 0
6:6/0 = 0
7:6/0 = 0
0:7/0 = 0
1:7/0 = 0
2:7/0 = 0
3:7/0 = 0
4:7/0 = 0
5:7/0 = 0
6:7/0 = 0
7:7/0 = 0
4:2/size_in_atlas = Vector2i(3, 1)
4:2/next_alternative_id = 2
4:2/0 = 0
4:2/1 = 1
4:2/1/flip_h = true
4:2/1/flip_v = true
4:2/1/transpose = true

[sub_resource type="TileSet" id="TileSet_wdk05"]
tile_size = Vector2i(64, 64)
sources/4 = SubResource("TileSetAtlasSource_2pi7f")

[node name="Node2D" type="Node2D"]
script = ExtResource("1_oi1ur")

[node name="TileMapLayer" type="TileMapLayer" parent="."]
use_parent_material = true
tile_set = SubResource("TileSet_wdk05")

[node name="UI" type="CanvasLayer" parent="."]
layer = 2

[node name="RoomPalette" type="VBoxContainer" parent="UI"]
z_index = 5
offset_right = 192.0
offset_bottom = 648.0
mouse_filter = 0

[node name="InfoLabel" type="Label" parent="UI"]
offset_left = 768.0
offset_top = 8.0
offset_right = 1136.0
offset_bottom = 56.0
horizontal_alignment = 2
autowrap_mode = 3

[node name="RoomLabel" type="Label" parent="UI"]
offset_left = 768.0
offset_top = 56.0
offset_right = 1136.0
offset_bottom = 96.0
horizontal_alignment = 2
autowrap_mode = 3

[node name="SaveHouseButton" type="Button" parent="UI"]
offset_left = 1040.0
offset_top = 608.0
offset_right = 1144.0
offset_bottom = 632.0
text = "Save Building"

[node name="HouseNameInput" type="TextEdit" parent="UI"]
offset_left = 1040.0
offset_top = 568.0
offset_right = 1152.0
offset_bottom = 604.0
placeholder_text = "Untitled"

[node name="RoomManager" type="Node" parent="."]
script = ExtResource("3_cm0pq")

[node name="ResourceManager" type="Node" parent="."]
script = ExtResource("4_fos0i")

[node name="UIManager" type="Node" parent="."]
script = ExtResource("3_r0du0")

[node name="CompoundRoomManager" type="Node" parent="."]

[node name="HouseManager" type="Node" parent="."]
script = ExtResource("6_3dxm6")

[connection signal="pressed" from="UI/SaveHouseButton" to="UIManager" method="_on_save_house_button_pressed"]
[connection signal="pressed" from="UI/SaveHouseButton" to="HouseManager" method="_on_save_house_button_pressed"]
[connection signal="resources_updated" from="RoomManager" to="ResourceManager" method="_on_resources_updated"]
[connection signal="room_list_updated" from="RoomManager" to="UIManager" method="_on_room_list_updated"]
[connection signal="room_placed" from="RoomManager" to="RoomManager" method="_on_room_placed"]
