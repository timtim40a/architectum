[gd_scene load_steps=15 format=3 uid="uid://b2ijp2yl5p3k8"]

[ext_resource type="Script" uid="uid://c00pucr40iyo6" path="res://main.gd" id="1_oi1ur"]
[ext_resource type="Texture2D" uid="uid://kko75fxu1e55" path="res://tilemap_architectum2.png" id="2_ilt5p"]
[ext_resource type="Script" uid="uid://b4lwjif6xdt13" path="res://room_manager.gd" id="3_cm0pq"]
[ext_resource type="Texture2D" uid="uid://bsqibvt6blw4o" path="res://tilemap4.png" id="3_lgr22"]
[ext_resource type="Script" uid="uid://bi6p3puchang8" path="res://ui_manager.gd" id="3_r0du0"]
[ext_resource type="Script" uid="uid://cu53roas08gmq" path="res://resource_manager.gd" id="4_fos0i"]
[ext_resource type="Script" uid="uid://cb7is4m5cvjnx" path="res://house_manager.gd" id="6_3dxm6"]
[ext_resource type="Script" uid="uid://cjsn2n4cgvvc3" path="res://camera.gd" id="8_trn2v"]
[ext_resource type="Script" uid="uid://b5pv1mvif6yck" path="res://grid_draw.gd" id="9_03owx"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_2pi7f"]
texture = ExtResource("2_ilt5p")
texture_region_size = Vector2i(64, 64)
0:0/0 = 0
1:0/0 = 0
2:0/0 = 0
3:0/0 = 0
4:0/0 = 0
5:0/0 = 0
6:0/0 = 0
7:0/0 = 0
0:1/0 = 0
1:1/0 = 0
2:1/0 = 0
3:1/0 = 0
4:1/0 = 0
5:1/0 = 0
6:1/0 = 0
7:1/0 = 0
0:2/0 = 0
1:2/0 = 0
2:2/0 = 0
3:2/0 = 0
7:2/0 = 0
0:3/0 = 0
1:3/0 = 0
2:3/0 = 0
3:3/0 = 0
4:3/0 = 0
5:3/0 = 0
6:3/0 = 0
7:3/0 = 0
0:4/0 = 0
1:4/0 = 0
2:4/0 = 0
3:4/0 = 0
4:4/0 = 0
5:4/0 = 0
6:4/0 = 0
7:4/0 = 0
0:5/0 = 0
1:5/0 = 0
2:5/0 = 0
3:5/0 = 0
4:5/0 = 0
5:5/0 = 0
6:5/0 = 0
7:5/0 = 0
0:6/0 = 0
1:6/0 = 0
2:6/0 = 0
3:6/0 = 0
4:6/0 = 0
5:6/0 = 0
6:6/0 = 0
7:6/0 = 0
0:7/0 = 0
1:7/0 = 0
2:7/0 = 0
3:7/0 = 0
4:7/0 = 0
5:7/0 = 0
6:7/0 = 0
7:7/0 = 0
4:2/size_in_atlas = Vector2i(3, 1)
4:2/next_alternative_id = 2
4:2/0 = 0
4:2/1 = 1
4:2/1/flip_h = true
4:2/1/flip_v = true
4:2/1/transpose = true

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_trn2v"]
texture = ExtResource("3_lgr22")
texture_region_size = Vector2i(64, 64)
0:0/0 = 0
1:0/0 = 0
2:0/0 = 0
3:0/0 = 0
4:0/0 = 0
5:0/0 = 0
6:0/0 = 0
7:0/0 = 0
0:1/0 = 0
1:1/0 = 0
2:1/0 = 0
3:1/0 = 0
4:1/0 = 0
5:1/0 = 0
6:1/0 = 0
7:1/0 = 0
0:2/0 = 0
1:2/0 = 0
2:2/0 = 0
3:2/0 = 0
4:2/0 = 0
5:2/0 = 0
6:2/0 = 0
7:2/0 = 0
0:3/0 = 0
1:3/0 = 0
2:3/0 = 0
3:3/0 = 0
4:3/0 = 0
5:3/0 = 0
6:3/0 = 0
7:3/0 = 0
4:4/0 = 0
5:4/0 = 0
6:4/0 = 0
7:4/0 = 0
4:5/0 = 0
5:5/0 = 0
6:5/0 = 0
7:5/0 = 0
0:6/0 = 0
1:6/0 = 0
2:6/0 = 0
4:6/0 = 0
5:6/0 = 0
6:6/0 = 0
7:6/0 = 0
0:7/0 = 0
1:7/0 = 0
2:7/0 = 0
3:7/0 = 0
4:7/0 = 0
5:7/0 = 0
6:7/0 = 0
7:7/0 = 0
0:4/size_in_atlas = Vector2i(3, 1)
0:4/0 = 0
0:5/size_in_atlas = Vector2i(3, 1)
0:5/next_alternative_id = 4
0:5/0 = 0
3:4/size_in_atlas = Vector2i(1, 3)
3:4/next_alternative_id = 4
3:4/0 = 0

[sub_resource type="TileSet" id="TileSet_wdk05"]
tile_size = Vector2i(64, 64)
sources/3 = SubResource("TileSetAtlasSource_2pi7f")
sources/4 = SubResource("TileSetAtlasSource_trn2v")

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_lgr22"]
texture = ExtResource("3_lgr22")
texture_region_size = Vector2i(64, 64)
0:0/0 = 0
0:0/0/modulate = Color(0.662185, 1, 0.633764, 1)
1:0/0 = 0
1:0/0/modulate = Color(0.662185, 1, 0.633764, 1)
2:0/0 = 0
2:0/0/modulate = Color(0.662185, 1, 0.633764, 1)
3:0/0 = 0
3:0/0/modulate = Color(0.662185, 1, 0.633764, 1)
4:0/0 = 0
4:0/0/modulate = Color(0.662185, 1, 0.633764, 1)
5:0/0 = 0
5:0/0/modulate = Color(0.662185, 1, 0.633764, 1)
6:0/0 = 0
6:0/0/modulate = Color(0.662185, 1, 0.633764, 1)
7:0/0 = 0
7:0/0/modulate = Color(0.662185, 1, 0.633764, 1)
0:1/0 = 0
0:1/0/modulate = Color(0.662185, 1, 0.633764, 1)
1:1/0 = 0
1:1/0/modulate = Color(0.662185, 1, 0.633764, 1)
2:1/0 = 0
2:1/0/modulate = Color(0.662185, 1, 0.633764, 1)
3:1/0 = 0
3:1/0/modulate = Color(0.662185, 1, 0.633764, 1)
4:1/0 = 0
4:1/0/modulate = Color(0.662185, 1, 0.633764, 1)
5:1/0 = 0
5:1/0/modulate = Color(0.662185, 1, 0.633764, 1)
6:1/0 = 0
6:1/0/modulate = Color(0.662185, 1, 0.633764, 1)
7:1/0 = 0
7:1/0/modulate = Color(0.662185, 1, 0.633764, 1)
0:2/0 = 0
0:2/0/modulate = Color(0.662185, 1, 0.633764, 1)
1:2/0 = 0
1:2/0/modulate = Color(0.662185, 1, 0.633764, 1)
2:2/0 = 0
2:2/0/modulate = Color(0.662185, 1, 0.633764, 1)
3:2/0 = 0
3:2/0/modulate = Color(0.662185, 1, 0.633764, 1)
4:2/0 = 0
4:2/0/modulate = Color(0.662185, 1, 0.633764, 1)
5:2/0 = 0
5:2/0/modulate = Color(0.662185, 1, 0.633764, 1)
6:2/0 = 0
6:2/0/modulate = Color(0.662185, 1, 0.633764, 1)
7:2/0 = 0
7:2/0/modulate = Color(0.662185, 1, 0.633764, 1)
0:3/0 = 0
0:3/0/modulate = Color(0.662185, 1, 0.633764, 1)
1:3/0 = 0
1:3/0/modulate = Color(0.662185, 1, 0.633764, 1)
2:3/0 = 0
2:3/0/modulate = Color(0.662185, 1, 0.633764, 1)
3:3/0 = 0
3:3/0/modulate = Color(0.662185, 1, 0.633764, 1)
4:3/0 = 0
4:3/0/modulate = Color(0.662185, 1, 0.633764, 1)
5:3/0 = 0
5:3/0/modulate = Color(0.662185, 1, 0.633764, 1)
6:3/0 = 0
6:3/0/modulate = Color(0.662185, 1, 0.633764, 1)
7:3/0 = 0
7:3/0/modulate = Color(0.662185, 1, 0.633764, 1)
0:4/0 = 0
0:4/0/modulate = Color(0.662185, 1, 0.633764, 1)
1:4/0 = 0
1:4/0/modulate = Color(0.662185, 1, 0.633764, 1)
2:4/0 = 0
2:4/0/modulate = Color(0.662185, 1, 0.633764, 1)
4:4/0 = 0
4:4/0/modulate = Color(0.662185, 1, 0.633764, 1)
5:4/0 = 0
5:4/0/modulate = Color(0.662185, 1, 0.633764, 1)
6:4/0 = 0
6:4/0/modulate = Color(0.662185, 1, 0.633764, 1)
7:4/0 = 0
7:4/0/modulate = Color(0.662185, 1, 0.633764, 1)
4:5/0 = 0
4:5/0/modulate = Color(0.662185, 1, 0.633764, 1)
5:5/0 = 0
5:5/0/modulate = Color(0.662185, 1, 0.633764, 1)
6:5/0 = 0
6:5/0/modulate = Color(0.662185, 1, 0.633764, 1)
7:5/0 = 0
7:5/0/modulate = Color(0.662185, 1, 0.633764, 1)
0:6/0 = 0
0:6/0/modulate = Color(0.662185, 1, 0.633764, 1)
1:6/0 = 0
1:6/0/modulate = Color(0.662185, 1, 0.633764, 1)
2:6/0 = 0
2:6/0/modulate = Color(0.662185, 1, 0.633764, 1)
4:6/0 = 0
4:6/0/modulate = Color(0.662185, 1, 0.633764, 1)
5:6/0 = 0
5:6/0/modulate = Color(0.662185, 1, 0.633764, 1)
6:6/0 = 0
6:6/0/modulate = Color(0.662185, 1, 0.633764, 1)
7:6/0 = 0
7:6/0/modulate = Color(0.662185, 1, 0.633764, 1)
0:7/0 = 0
0:7/0/modulate = Color(0.662185, 1, 0.633764, 1)
1:7/0 = 0
1:7/0/modulate = Color(0.662185, 1, 0.633764, 1)
2:7/0 = 0
2:7/0/modulate = Color(0.662185, 1, 0.633764, 1)
3:7/0 = 0
3:7/0/modulate = Color(0.662185, 1, 0.633764, 1)
4:7/0 = 0
4:7/0/modulate = Color(0.662185, 1, 0.633764, 1)
5:7/0 = 0
5:7/0/modulate = Color(0.662185, 1, 0.633764, 1)
6:7/0 = 0
6:7/0/modulate = Color(1, 0.321569, 0, 1)
7:7/0 = 0
7:7/0/modulate = Color(1, 0.321569, 0, 1)
0:5/size_in_atlas = Vector2i(3, 1)
0:5/0 = 0
0:5/0/modulate = Color(0.662185, 1, 0.633764, 1)
3:4/size_in_atlas = Vector2i(1, 3)
3:4/0 = 0
3:4/0/modulate = Color(0.662185, 1, 0.633764, 1)

[sub_resource type="TileSet" id="TileSet_trn2v"]
tile_size = Vector2i(64, 64)
sources/1 = SubResource("TileSetAtlasSource_lgr22")

[node name="Node2D" type="Node2D"]
script = ExtResource("1_oi1ur")

[node name="TileMapLayer" type="TileMapLayer" parent="."]
use_parent_material = true
tile_set = SubResource("TileSet_wdk05")

[node name="PreviewGrid" type="TileMapLayer" parent="."]
tile_set = SubResource("TileSet_trn2v")

[node name="UI" type="CanvasLayer" parent="."]
layer = 2

[node name="InfoLabel" type="Label" parent="UI"]
offset_left = 768.0
offset_top = 8.0
offset_right = 1136.0
offset_bottom = 56.0
horizontal_alignment = 2
autowrap_mode = 3

[node name="RoomLabel" type="Label" parent="UI"]
offset_left = 768.0
offset_top = 56.0
offset_right = 1136.0
offset_bottom = 96.0
horizontal_alignment = 2
autowrap_mode = 3

[node name="TextEdit" type="TextEdit" parent="UI"]
offset_left = 8.0
offset_top = 8.0
offset_right = 192.0
offset_bottom = 48.0
placeholder_text = "Name the house..."

[node name="Button" type="Button" parent="UI"]
offset_left = 8.0
offset_top = 48.0
offset_right = 192.0
offset_bottom = 88.0
text = "Save House"

[node name="RoomPalette" type="HBoxContainer" parent="UI"]
offset_left = 8.0
offset_top = 512.0
offset_right = 1152.0
offset_bottom = 640.0

[node name="Panel" type="Panel" parent="UI"]
offset_right = 40.0
offset_bottom = 40.0

[node name="DeleteButton" type="Button" parent="UI"]
offset_left = 8.0
offset_top = 96.0
offset_right = 192.0
offset_bottom = 136.0
toggle_mode = true
text = "Delete Rooms"

[node name="SaveHouseButton" type="Button" parent="UI"]
offset_left = 1040.0
offset_top = 608.0
offset_right = 1144.0
offset_bottom = 632.0
text = "Save Building"

[node name="HouseNameInput" type="TextEdit" parent="UI"]
offset_left = 1040.0
offset_top = 568.0
offset_right = 1152.0
offset_bottom = 604.0
placeholder_text = "Untitled"

[node name="RoomManager" type="Node" parent="."]
script = ExtResource("3_cm0pq")

[node name="ResourceManager" type="Node" parent="."]
script = ExtResource("4_fos0i")

[node name="UIManager" type="Node" parent="."]
script = ExtResource("3_r0du0")

[node name="CompoundRoomManager" type="Node" parent="."]

[node name="HouseManager" type="Node" parent="."]
script = ExtResource("6_3dxm6")

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2(576, 320)
scale = Vector2(1, 1e-05)
drag_horizontal_enabled = true
drag_vertical_enabled = true
script = ExtResource("8_trn2v")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Grid" type="Node2D" parent="CanvasLayer"]
script = ExtResource("9_03owx")

[connection signal="pressed" from="UI/Button" to="HouseManager" method="_on_save_house_button_pressed"]
[connection signal="toggled" from="UI/DeleteButton" to="RoomManager" method="_on_delete_button_toggled"]
[connection signal="toggled" from="UI/DeleteButton" to="UIManager" method="_on_delete_button_toggled"]
[connection signal="pressed" from="UI/SaveHouseButton" to="UIManager" method="_on_save_house_button_pressed"]
[connection signal="pressed" from="UI/SaveHouseButton" to="HouseManager" method="_on_save_house_button_pressed"]
[connection signal="resources_updated" from="RoomManager" to="ResourceManager" method="_on_resources_updated"]
[connection signal="room_list_updated" from="RoomManager" to="UIManager" method="_on_room_list_updated"]
[connection signal="room_placed" from="RoomManager" to="RoomManager" method="_on_room_placed"]
